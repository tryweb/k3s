# LibreNMS Helm Chart Values
# 此檔案由 Git 管理，透過 Rancher Fleet 自動部署
# 官方 Chart: https://github.com/librenms/helm-charts
#
# ⚠️  敏感資訊（密碼、密鑰）請使用 Kubernetes Secret 管理
#     請參閱 README.md 的「敏感資訊管理」章節

# LibreNMS 核心配置
librenms:
  # 應用程式密鑰 - 使用 existingSecret 引用
  # 需要先建立 Secret: librenms-app-secret
  existingSecret: librenms-app-secret
  existingSecretKey: appkey

# 基本配置
image:
  repository: librenms/librenms
  tag: ""  # 留空使用 chart 預設版本
  pullPolicy: IfNotPresent

# 資源配置
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "1Gi"
    cpu: "500m"

# 持久化存儲
persistence:
  enabled: true
  storageClass: ""  # 使用預設 StorageClass
  size: 5Gi

# 資料庫配置 (內建 MariaDB)
# 密碼使用 existingSecret 引用，不存放在 Git 中
mariadb:
  enabled: true
  auth:
    database: librenms
    username: librenms
    # 使用預先建立的 Secret
    existingSecret: librenms-mariadb-secret
  primary:
    persistence:
      enabled: true
      size: 10Gi

# Redis 配置
# 密碼使用 existingSecret 引用，不存放在 Git 中
redis:
  enabled: true
  auth:
    enabled: true
    existingSecret: librenms-redis-secret
    existingSecretPasswordKey: redis-password

# Ingress 配置
ingress:
  enabled: true
  className: "traefik"  # k3s 預設使用 traefik
  annotations: {}
  hosts:
    - host: librenms.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# 服務配置
service:
  type: ClusterIP
  port: 80

# SNMP 配置
snmp:
  community: "public"

# 環境變數
env: {}

# 額外的環境變數從 Secret 載入
envFrom: []

# 副本數
replicaCount: 1

# 節點選擇器
nodeSelector: {}

# 容忍度
tolerations: []

# 親和性
affinity: {}